{% extends "layout.html" %}

{% block title %}
    Main page
{% endblock %}

{% block main %}
    <div main>
        <div  tables>
           <table class = "table table-striped table-dark" align = "center">
                <h2>Financial summary:</h2>
                <tr>
                    <th>Expenses</th>
                    <th>Income</th>
                    <th>Cash-flow</th>
                    <th>Grand total</th>
                </tr>
                <tr>
                    <td>{{ expenses[0] }}</td>
                    <td>{{ income[0] }}</td>
                    <td>{{ grand_total }}</td>
                    <td>{{ usd(cash) }}</td>
                </tr>
                </table>
        </div>
        <div tables>
           <table class = "table table-striped table-dark" align = "center">
                <h2>Recurring entries</h2>
                <tr>
                    <th>ID</th>
                    <th>Type</th>
                    <th>Title</th>
                    <th>Amount</th>
                    <th>Time</th>
                    <th>Frequency</th>
                </tr>
                {% for i in range(j) %}
                    <tr>
                        <td>{{ id_[i]["id"] }}</td>
                        <td>{{ type_[i]["type"] }}</td>
                        <td>{{ title[i]["title"] }}</td>
                        <td>{{ usd(amount[i]["amount"]) }}</td>
                        <td>{{ time[i]["time"] }}</td>
                        <td>{{ frequency[i]["frequency"] }}</td>
                    </tr>
                {% endfor %}
              </table>
        </div>
        <form id = "auto_values" name ="auto_values" action = "/auto_values" method = "POST">
            <div class = "form-group">
                <h2>Add recurring income/expense element</h2>
                <p class = "lefties less">Frequency:</p>
                <select required class = "form-control" name = "frequency" id = "frequency" size = "3">
                    <option id = "daily" name = "daily" value = "daily">Daily</option>
                    <option id = "weekly" name = "weekly" value = "weekly">Weekly</option>
                    <option id = "monthly" name = "monthly" value = "monthly">Monthly</option>
                </select>
            </div>
            <div id = "freq" class = "val_error"></div>
            <div class = "form-group">
                <p class = "lefties less">Type:</p>                
                <select required class = "form-control" name = "auto_type" id = "auto_type" size = "2">
                    <option id = "auto_income" name = "auto_income" value = "income">Income</option>
                    <option id = "auto_expense" name = "auto_expense" value = "expense">Expense</option>
                </select>
            </div>
            <div id = "autotype" class = "val_error"></div>
            <div class = "form-group">
                <p class = "lefties">Title:</p>
                <input required class = "form-control" id = "auto_title" name = "auto_title" type = "text" placeholder = "Title">
                </input>                
            </div>
            <div class = "val_error" id = "autotitle"></div>
            <div class = "form-group">
                <p class = "lefties">Amount:</p>
                <input required class = "form-control" id = "auto_amount" name = "auto_amount" type = "number" min = "0" step = "any" placeholder = "Amount">
                </input>                
            </div>
            <div id = "autoamount" class = "val_error"></div>
            <button class="btn btn-primary" type="submit">Add recurring element</button>
        </form>
        <p style ="padding-top: 10px;">
            <button style = "margin-right: 10px;" class="btn btn-primary" type="button" id = "editauto">Edit recurring element</button>
            <button class="btn btn-primary" type="button" id = "deleteauto">Delete recurring element</button>
        </p>
        <form style = "display: none;" id = "edit_auto" name ="edit_auto" action = "/edit_auto" method = "POST">            
            <h2 style = "padding-top: 10px;">Edit recurring income/expense entry</h2>
            <div class = "form-group" >
                <p class = "lefties less">Entry ID:</p>
                <input required type = "number" id = "edit_id" name = "edit_id" placeholder = "ID"></input>
            </div>
            <div class = "alert alert-danger" id = "editid"></div>
            <div class = "form-group">
                <p class = "lefties less">New type:</p>
                <select name = "edit_type" id = "edit_type" size = "2">
                    <option value = "income">Income</option>
                    <option value = "expense">Expense</option>
                </select>
                (optional)
            </div>
            <div class = "form-group">
                <p class = "lefties">New title:</p>
                <input type = "text" id = "edit_title" name = "edit_title" placeholder = "Title"></input>
                (optional)
            </div>
            <div class = "form-group">
                <p class = "lefties">New amount:</p>
                <input type = "number" min = "0" id = "edit_amount" name = "edit_amount" placeholder = "Amount" step = "any"></input>
                (optional)
            </div>
            <div class = "val_error" id = "editamount"></div>
            <div class = "form-group">
                <p class = "lefties less">New frequency:</p>
                <select id = "edit_frequency" name = edit_frequency size = "3">
                    <option value = "daily">Daily</option>
                    <option value = "weekly">Weekly</option>
                    <option value = "monthly">Monthly</option>
                </select>
                (optional)
            </div>
            <button class="btn btn-primary" type="submit">Edit recurring entry</button>
        </form>
        <form style = "display: none;" id = "delete_auto" name ="delete_auto" action = "/delete_auto" method = "POST">
            <div class = "form-group" style = "padding-top: 10px;">
                <h2>Delete recurring income/expense entry</h2>
                <p class = "lefties less"> Entry ID: </p>
                <input required type = "number" id = "delete_id" name = "delete_id" placeholder = "ID"></input>
                <div class = "alert alert-danger" id = "deleteid"></div>
            </div>
            <button class="btn btn-primary" type="submit">Delete recurring entry</button>    
        </form>
            <p style ="padding-top: 10px;">
                <h2>Alternatively, press this button to delete all recurring entries:</h2>
                <button class="btn btn-primary" type="button" id = "deleteallauto">Delete all recurring entries</button>
            </p>
        <form style = "display: none;" id = "delete_all_auto" name = "delete_all_auto" action = "/delete_all_auto" 
        method = "post">
            <div class = "form-group">
                <p>
                    <input type = "checkbox" id = "delete_all_check" name = "delete_all_check" value = "uncheck">
                    I wish to delete all recurring input and expense entries</input>
                </p>
                <button class="btn btn-primary" type="submit">Delete all recurring entries</button>
            </div>
        </form>
    </div>
{% endblock %}